<!DOCTYPE html>
<html>
  <head>
    <% include ../static/partials/head.ejs %>
  </head>
  <body>
    <main class="container">
		<% include ../static/partials/messages.ejs %>
      <% include ../static/partials/navbar.ejs %>

      <h1>Advertisements</h1>
<!-- We check that currentUser is present and then && the answer to isAdmin. -->
   <% if(currentUser && currentUser.isAdmin()) { %>
     <a href="/advertisements/new" class="btn btn-success">New Advertisement</a>
   <% } %>
	  	<ul class="list-group">
<!-- #1 In this template, we have access to advertisements which would be a variable containing all advertisements. We loop over the advertisements and for each advertisement, display it. Notice that this is plain JavaScript. EJS tags just allow us to evaluate JavaScript where needed. Also notice the closing } and ) are still needed and evaluated inside EJS tags where needed as well. -->
        <% advertisements.forEach((advertisement) => { %>
<!-- #2 For each advertisement, we are generating an HTML tag with an href attribute pointing to a route we've yet to define. We can use EJS tags inside of strings and they will evaluate as expected. -->
          <li class="list-group-item">
            <a href="/advertisements/<%= advertisement.id %>"> <%= advertisement.title %> </a>
          </li>
        <% }) %>
      </ul>
    </main>
  </body>
</html>
